<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - Hospital Management System</title>
</head>
<body style="
    font-family: 'Arial', sans-serif;
    background-color: #f4f6f8;
    color: #333;
    line-height: 1.6;
    display: flex;
    flex-direction: column;
    min-height: 100vh;
    margin: 0;
    padding: 0;
">

<header style="
    background-color: #007bff;
    padding: 15px 0;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    color: white;
    width: 100%;
">
    <div style="
        max-width: 1200px;
        margin: 0 auto;
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 0 20px;
        width: 100%;
    ">
        <div style="width: 150px;">
            <img src="https://via.placeholder.com/100x50?text=Logo" alt="Hospital Management System Logo" style="width: 100%; height: auto;">
        </div>
        <nav>
            <ul style="
                list-style: none;
                display: flex;
                gap: 20px;
                margin: 0;
                padding: 0;
            ">
                <li><a href="#" style="
                    text-decoration: none;
                    color: white;
                    font-weight: bold;
                    padding: 8px 15px;
                    border-radius: 5px;
                    transition: background-color 0.3s ease-in-out;
                ">Dashboard</a></li>
                <li><a href="LogoutServlet" style="
                    text-decoration: none;
                    color: white;
                    font-weight: bold;
                    padding: 8px 15px;
                    border-radius: 5px;
                    transition: background-color 0.3s ease-in-out;
                ">Logout</a></li>
            </ul>
        </nav>
    </div>
</header>

<div style="
    flex: 1;
    max-width: 1200px;
    margin: 20px auto;
    padding: 20px;
">
    <h1 style="
        text-align: center;
        margin-bottom: 30px;
        font-size: 2.5rem;
        color: #007bff;
    ">Admin Dashboard</h1>

    <div style="
        background-color: #ffffff;
        border-radius: 10px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        padding: 30px;
        margin-bottom: 20px;
    ">
        <h2 style="
            font-size: 1.75rem;
            margin-bottom: 15px;
            color: #343a40;
        ">Welcome, Admin!</h2>
        <p style="font-size: 1.1rem; color: #666;">Use the navigation to manage users, doctors, appointments, and more.</p>
    </div>

    <!-- Section for Import Users -->
    <div style="
        background-color: #ffffff;
        border-radius: 10px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        padding: 30px;
        margin-bottom: 20px;
    ">
        <h2 style="
            font-size: 1.75rem;
            margin-bottom: 15px;
            color: #343a40;
        ">Import Users (Doctors)</h2>
        <form id="importUsersForm">
            <label for="importFile" style="display: block; margin-bottom: 10px;">Select JSON/XML File:</label>
            <input type="file" id="importFile" name="importFile" required style="
                width: 100%;
                padding: 10px;
                margin-bottom: 15px;
                border-radius: 5px;
                border: 1px solid #ced4da;
            ">
            <button type="submit" style="
                width: 100%;
                padding: 10px;
                background-color: #007bff;
                color: white;
                border: none;
                border-radius: 5px;
                cursor: pointer;
                font-weight: bold;
                transition: background-color 0.3s ease-in-out;
            ">Import</button>
        </form>
        <div id="importUsersResult" style="display:none;" class="alert success"></div>
    </div>

    <!-- Section for Show All Doctors -->
    <div style="
        background-color: #ffffff;
        border-radius: 10px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        padding: 30px;
        margin-bottom: 20px;
    ">
        <h2 style="
            font-size: 1.75rem;
            margin-bottom: 15px;
            color: #343a40;
        ">Show All Doctors</h2>
        <form id="showDoctorsForm">
            <label for="doctorSelect" style="display: block; margin-bottom: 10px;">Select Doctor:</label>
            <select id="doctorSelect" name="doctorSelect" required style="
                width: 100%;
                padding: 10px;
                margin-bottom: 15px;
                border-radius: 5px;
                border: 1px solid #ced4da;
            ">
                <option value="dr_smith">Dr. Smith</option>
                <option value="dr_jones">Dr. Jones</option>
                <option value="dr_williams">Dr. Williams</option>
            </select>
            <button type="submit" style="
                width: 100%;
                padding: 10px;
                background-color: #007bff;
                color: white;
                border: none;
                border-radius: 5px;
                cursor: pointer;
                font-weight: bold;
                transition: background-color 0.3s ease-in-out;
            ">Show Schedule</button>
        </form>
        <div id="doctorsScheduleResult" style="display:none;" class="alert success"></div>
    </div>

    <!-- Section for Cancel Appointments -->
    <div style="
        background-color: #ffffff;
        border-radius: 10px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        padding: 30px;
        margin-bottom: 20px;
    ">
        <h2 style="
            font-size: 1.75rem;
            margin-bottom: 15px;
            color: #343a40;
        ">Cancel Appointments</h2>
        <form id="cancelAppointmentsForm">
            <label for="appointmentDateCancel" style="display: block; margin-bottom: 10px;">Select Date:</label>
            <input type="date" id="appointmentDateCancel" name="appointmentDateCancel" required style="
                width: 100%;
                padding: 10px;
                margin-bottom: 15px;
                border-radius: 5px;
                border: 1px solid #ced4da;
            ">
            <label for="doctorSelectCancel" style="display: block; margin-bottom: 10px;">Select Doctor:</label>
            <select id="doctorSelectCancel" name="doctorSelectCancel" required style="
                width: 100%;
                padding: 10px;
                margin-bottom: 15px;
                border-radius: 5px;
                border: 1px solid #ced4da;
            ">
                <option value="dr_smith">Dr. Smith</option>
                <option value="dr_jones">Dr. Jones</option>
                <option value="dr_williams">Dr. Williams</option>
            </select>
            <button type="submit" style="
                width: 100%;
                padding: 10px;
                background-color: #007bff;
                color: white;
                border: none;
                border-radius: 5px;
                cursor: pointer;
                font-weight: bold;
                transition: background-color 0.3s ease-in-out;
            ">Cancel Appointments</button>
        </form>
        <div id="cancelAppointmentsResult" style="display:none;" class="alert success"></div>
    </div>

    <!-- Section for Show All Patients -->
    <div style="
        background-color: #ffffff;
        border-radius: 10px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        padding: 30px;
        margin-bottom: 20px;
    ">
        <h2 style="
            font-size: 1.75rem;
            margin-bottom: 15px;
            color: #343a40;
        ">Show All Patients</h2>
        <form id="showPatientsForm">
            <label for="filterPatients" style="display: block; margin-bottom: 10px;">Filter by:</label>
            <select id="filterPatients" name="filterPatients" required style="
                width: 100%;
                padding: 10px;
                margin-bottom: 15px;
                border-radius: 5px;
                border: 1px solid #ced4da;
            ">
                <option value="all">All Patients</option>
                <option value="recent">Recently Added</option>
                <option value="age">Age</option>
                <option value="condition">Condition</option>
            </select>
            <button type="submit" style="
                width: 100%;
                padding: 10px;
                background-color: #007bff;
                color: white;
                border: none;
                border-radius: 5px;
                cursor: pointer;
                font-weight: bold;
                transition: background-color 0.3s ease-in-out;
            ">Show Patients</button>
        </form>
        <div id="patientsList"></div>
    </div>
</div>

<script type="text/javascript">
document.addEventListener("DOMContentLoaded", function() {

    // Handle Import Users Form
    const importUsersForm = document.getElementById('importUsersForm');
    const importUsersResult = document.getElementById('importUsersResult');

    importUsersForm.addEventListener('submit', function(event) {
        event.preventDefault();
        const formData = new FormData(importUsersForm);

        fetch('ImportUsersServlet', {
            method: 'POST',
            body: formData
        })
        .then(response => response.json())
        .then(result => {
            importUsersResult.style.display = 'block';
            if (result.success) {
                importUsersResult.textContent = "Users imported successfully.";
                importUsersResult.className = 'alert success';
            } else {
                importUsersResult.textContent = "Failed to import users.";
                importUsersResult.className = 'alert error';
            }
        })
        .catch(error => {
            importUsersResult.textContent = "An error occurred during import.";
            importUsersResult.className = 'alert error';
            importUsersResult.style.display = 'block';
        });
    });

    // Handle Show Doctors Form
    const showDoctorsForm = document.getElementById('showDoctorsForm');
    const doctorsScheduleResult = document.getElementById('doctorsScheduleResult');

    showDoctorsForm.addEventListener('submit', function(event) {
        event.preventDefault();
        const doctor = document.getElementById('doctorSelect').value;

        fetch('ShowDoctorsServlet', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ doctor })
        })
        .then(response => response.json())
        .then(result => {
            doctorsScheduleResult.style.display = 'block';
            if (result.success) {
                doctorsScheduleResult.textContent = result.schedule;
                doctorsScheduleResult.className = 'alert success';
            } else {
                doctorsScheduleResult.textContent = "Failed to fetch schedule.";
                doctorsScheduleResult.className = 'alert error';
            }
        })
        .catch(error => {
            doctorsScheduleResult.textContent = "An error occurred.";
            doctorsScheduleResult.className = 'alert error';
            doctorsScheduleResult.style.display = 'block';
        });
    });

    // Handle Cancel Appointments Form
    const cancelAppointmentsForm = document.getElementById('cancelAppointmentsForm');
    const cancelAppointmentsResult = document.getElementById('cancelAppointmentsResult');

    cancelAppointmentsForm.addEventListener('submit', function(event) {
        event.preventDefault();
        const date = document.getElementById('appointmentDateCancel').value;
        const doctor = document.getElementById('doctorSelectCancel').value;

        fetch('CancelAppointmentsServlet', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ date, doctor })
        })
        .then(response => response.json())
        .then(result => {
            cancelAppointmentsResult.style.display = 'block';
            if (result.success) {
                cancelAppointmentsResult.textContent = `Appointments for ${doctor} on ${date} have been canceled.`;
                cancelAppointmentsResult.className = 'alert success';
            } else {
                cancelAppointmentsResult.textContent = "Failed to cancel appointments.";
                cancelAppointmentsResult.className = 'alert error';
            }
        })
        .catch(error => {
            cancelAppointmentsResult.textContent = "An error occurred.";
            cancelAppointmentsResult.className = 'alert error';
            cancelAppointmentsResult.style.display = 'block';
        });
    });

    // Handle Show Patients Form
    const showPatientsForm = document.getElementById('showPatientsForm');
    const patientsList = document.getElementById('patientsList');

    showPatientsForm.addEventListener('submit', function(event) {
        event.preventDefault();
        const filter = document.getElementById('filterPatients').value;

        fetch('ShowPatientsServlet', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ filter })
        })
        .then(response => response.json())
        .then(data => {
            patientsList.innerHTML = '';
            if (data && data.length > 0) {
                data.forEach(patient => {
                    const patientDiv = document.createElement('div');
                    patientDiv.className = 'patient';
                    patientDiv.innerHTML = `Name: ${patient.name}, Age: ${patient.age}, Condition: ${patient.condition}`;
                    patientsList.appendChild(patientDiv);
                });
            } else {
                patientsList.textContent = "No patients found.";
            }
        })
        .catch(error => {
            patientsList.textContent = "An error occurred.";
        });
    });
});

</script>

<footer style="
    background-color: #007bff;
    color: white;
    padding: 20px 0;
    text-align: center;
    box-shadow: 0 -4px 6px rgba(0, 0, 0, 0.1);
    width: 100%;
    margin-top: auto;
">
    <div style="
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 20px;
    ">
        <p>&copy; 2024 Hospital Management System. All Rights Reserved.</p>
    </div>
</footer>

</body>
</html>
